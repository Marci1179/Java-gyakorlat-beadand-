<!DOCTYPE html>
<html lang="hu" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Kapcsolat</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        body { background-color: #1a1a1a; color: white; margin: 0; }
        .f1-navbar { background-color: #111; border-bottom: 3px solid #e10600; }
        .f1-nav { list-style: none; margin: 0; padding: 10px 0; display: flex; justify-content: center; gap: 24px; }
        .f1-nav li a { color: #ddd; text-decoration: none; font-weight: 600; }
        .f1-nav li a:hover { color: #e10600; }
        header { background-color: #2b2b2b; padding: 80px 0; text-align: center; }
        h1 { font-size: 4rem; font-weight: 800; text-transform: uppercase; }

        .contact-wrapper {
            max-width: 700px;
            margin: 40px auto 60px auto;
        }

        .contact-card {
            background-color: #2b2b2b;
            border: 1px solid #e10600;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 0 25px rgba(0, 0, 0, 0.6);
        }

        .form-label {
            font-weight: 600;
        }
    </style>
</head>

<body>

<nav class="f1-navbar">
    <ul class="f1-nav">
        <li><a th:href="@{/fooldal}">Főoldal</a></li>
        <li><a th:href="@{/adatbazis}">Adatbázis</a></li>
        <li><a th:href="@{/kapcsolat}">Kapcsolat</a></li>
        <li><a th:href="@{/diagram}">Diagram</a></li>
        <li><a th:href="@{/crud}">CRUD</a></li>
        <li><a th:href="@{/restful}">RESTful</a></li>

        <li th:if="${session.loggedInUser != null}">
            <a th:href="@{/uzenetek}">Üzenetek</a>
        </li>

        <!-- ADMIN csak adminnak -->
        <li th:if="${session.loggedInUser != null and session.loggedInUser.role == 'admin'}">
            <a th:href="@{/admin}">Admin</a>
        </li>

        <li th:if="${session.loggedInUser == null}">
            <a th:href="@{/login}">Bejelentkezés</a>
        </li>
        <li th:if="${session.loggedInUser == null}">
            <a th:href="@{/register}">Regisztráció</a>
        </li>
        <li th:if="${session.loggedInUser != null}">
            <a th:href="@{/logout}">Kijelentkezés</a>
        </li>
    </ul>
</nav>

<header>
    <h1>Kapcsolat</h1>
</header>

<div class="container contact-wrapper">

    <!-- Sikeres mentés üzenete -->
    <div th:if="${successMessage}" class="alert alert-success text-center" role="alert"
         th:text="${successMessage}">
        Üzenet sikeresen elküldve.
    </div>

    <div class="contact-card">
        <h2 class="mb-4">Írjon nekünk!</h2>

        <form th:action="@{/kapcsolat}" th:object="${messageForm}" method="post" novalidate>

            <div class="mb-3">
                <label for="name" class="form-label">Név</label>
                <input type="text" id="name" class="form-control"
                       th:field="*{name}"
                       th:classappend="${#fields.hasErrors('name')} ? ' is-invalid'">
                <div class="invalid-feedback" th:if="${#fields.hasErrors('name')}"
                     th:errors="*{name}">Hiba a név mezőben</div>
            </div>

            <div class="mb-3">
                <label for="email" class="form-label">E-mail cím</label>
                <input type="email" id="email" class="form-control"
                       th:field="*{email}"
                       th:classappend="${#fields.hasErrors('email')} ? ' is-invalid'">
                <div class="invalid-feedback" th:if="${#fields.hasErrors('email')}"
                     th:errors="*{email}">Hiba az e-mail mezőben</div>
            </div>

            <div class="mb-3">
                <label for="subject" class="form-label">Tárgy</label>
                <input type="text" id="subject" class="form-control"
                       th:field="*{subject}"
                       th:classappend="${#fields.hasErrors('subject')} ? ' is-invalid'">
                <div class="invalid-feedback" th:if="${#fields.hasErrors('subject')}"
                     th:errors="*{subject}">Hiba a tárgy mezőben</div>
            </div>

            <div class="mb-3">
                <label for="text" class="form-label">Üzenet</label>
                <textarea id="text" rows="5" class="form-control"
                          th:field="*{text}"
                          th:classappend="${#fields.hasErrors('text')} ? ' is-invalid'"></textarea>
                <div class="invalid-feedback" th:if="${#fields.hasErrors('text')}"
                     th:errors="*{text}">Hiba az üzenet mezőben</div>
            </div>

            <div class="text-end">
                <button type="submit" class="btn btn-danger px-4">Üzenet küldése</button>
            </div>
        </form>
    </div>
</div>

</body>
</html>
